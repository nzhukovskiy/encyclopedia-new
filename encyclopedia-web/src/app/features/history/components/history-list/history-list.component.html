<div class="all-history">
    @for (historyRecord of history?.data; track $index) {
        <a [routerLink]="[`/history/${historyRecord.id}`]" class="history-card" [ngClass]="'action-' + historyRecord.actionType.toLowerCase()">
            <div class="right-line">
            </div>
            @if (type === "forArticle") {
                <div class="user-avatar">
                    {{historyRecord.user.firstName.charAt(0)}}{{historyRecord.user.lastName.charAt(0)}}
                </div>
            }
            @else if (type === "forUser") {
                <div class="image-preview">
                    @if (historyRecord.article.imagePath) {
                        <img appImageViewer [src]="`http://localhost:3000/uploads/images/${historyRecord.article.imagePath}`">
                    }
                    @else {
                        <img src="assets/no-image-placeholder.jpg">
                    }
                </div>
            }
            <div class="history-metadata">
                <div class="user-info">
                    @if (type === "forArticle") {
                        <div>
                            {{historyRecord.user.firstName}} {{historyRecord.user.lastName}}
                        </div>
                    }
                    @else if (type === "forUser") {
                        <div>{{historyRecord.article.title}}</div>
                    }
                    
                    <div class="history-action-badge">
                        @switch (historyRecord.actionType) {
                            @case (actionType.Creation) { <span> {{"text-constants.history.actions.create" | translate }}</span> }
                            @case (actionType.Updating) { <span> {{"text-constants.history.actions.update" | translate }}</span> }
                            @case (actionType.Deleting) { <span> {{"text-constants.history.actions.delete" | translate }}</span> }
                            @case (actionType.Restoring) { <span> {{"text-constants.history.actions.restore" | translate }}</span> }
                        }
                    </div>
                </div>
                <div class="history-date">
                    {{historyRecord.actionDate | date:"d.LL.y Ð² H:mm"}}
                </div>
            </div>

        </a>
    }
</div>
<mat-paginator class="startups-paginator" [length]="history?.pagination?.total"
               [pageIndex]="history?.pagination?.page"
               [pageSize]="history?.pagination?.limit"
               [pageSizeOptions]="[5, 10, 25, 100]"
               (page)="handlePageChange($event)"
               aria-label="Select page">
</mat-paginator>
